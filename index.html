<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<title>ðŸŽ² Carnet Cannes 2026</title>
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=DM+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
  :root {
    --red: #E8282A;
    --gold: #F5C842;
    --dark: #1A1A1A;
    --card: #242424;
    --card2: #2E2E2E;
    --text: #F0EDE8;
    --muted: #888;
    --border: #3A3A3A;
    --green: #4CAF82;
    --orange: #F5833A;
  }
  * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }
  body { background: var(--dark); color: var(--text); font-family: 'DM Sans', sans-serif; min-height: 100vh; overflow-x: hidden; }

  /* HEADER */
  .header {
    background: var(--red);
    padding: 16px 20px 14px;
    position: sticky; top: 0; z-index: 100;
    display: flex; align-items: center; justify-content: space-between;
    box-shadow: 0 4px 20px rgba(232,40,42,0.4);
  }
  .header-title { font-family: 'Bebas Neue', sans-serif; font-size: 26px; letter-spacing: 2px; color: #fff; }
  .header-sub { font-size: 11px; color: rgba(255,255,255,0.75); letter-spacing: 1px; text-transform: uppercase; margin-top: 1px; }
  .header-count { background: var(--dark); color: var(--gold); font-family: 'Bebas Neue', sans-serif; font-size: 22px; padding: 4px 10px; border-radius: 8px; min-width: 44px; text-align: center; }

  /* TABS */
  .tabs { display: flex; background: var(--card); border-bottom: 1px solid var(--border); }
  .tab { flex: 1; padding: 12px 8px; text-align: center; font-size: 12px; font-weight: 600; letter-spacing: 0.5px; color: var(--muted); cursor: pointer; transition: all 0.2s; border-bottom: 3px solid transparent; text-transform: uppercase; }
  .tab.active { color: var(--gold); border-bottom-color: var(--gold); background: rgba(245,200,66,0.05); }

  /* PAGES */
  .page { display: none; }
  .page.active { display: block; }

  /* ADD FORM */
  .form-wrap { padding: 16px; display: flex; flex-direction: column; gap: 12px; }
  .field-label { font-size: 11px; text-transform: uppercase; letter-spacing: 1px; color: var(--muted); margin-bottom: 5px; font-weight: 600; }
  input[type=text], select, textarea {
    width: 100%; background: var(--card); border: 1px solid var(--border); border-radius: 10px;
    color: var(--text); font-family: 'DM Sans', sans-serif; font-size: 15px; padding: 12px 14px;
    outline: none; transition: border-color 0.2s;
  }
  input[type=text]:focus, select:focus, textarea:focus { border-color: var(--gold); }
  select option { background: var(--card); }
  textarea { resize: none; min-height: 70px; }

  /* STAR RATING */
  .stars { display: flex; gap: 6px; }
  .star { font-size: 28px; cursor: pointer; opacity: 0.25; transition: opacity 0.15s, transform 0.15s; user-select: none; }
  .star.on { opacity: 1; transform: scale(1.1); }

  /* DECISION PILLS */
  .pills { display: flex; gap: 8px; flex-wrap: wrap; }
  .pill {
    padding: 8px 16px; border-radius: 20px; font-size: 13px; font-weight: 600;
    border: 2px solid var(--border); cursor: pointer; transition: all 0.2s; color: var(--muted);
  }
  .pill.buy.on { background: var(--green); border-color: var(--green); color: #fff; }
  .pill.retry.on { background: var(--orange); border-color: var(--orange); color: #fff; }
  .pill.skip.on { background: #555; border-color: #555; color: #fff; }

  /* DAY SELECTOR */
  .day-btns { display: flex; gap: 8px; }
  .day-btn { flex: 1; padding: 10px 4px; border-radius: 10px; border: 2px solid var(--border); background: none; color: var(--muted); font-family: 'DM Sans', sans-serif; font-size: 13px; font-weight: 600; cursor: pointer; transition: all 0.2s; text-align: center; }
  .day-btn.on { border-color: var(--red); background: rgba(232,40,42,0.15); color: var(--text); }

  /* SUBMIT BTN */
  .btn-save {
    background: var(--gold); color: var(--dark); border: none; border-radius: 12px;
    padding: 16px; font-family: 'Bebas Neue', sans-serif; font-size: 20px; letter-spacing: 2px;
    cursor: pointer; width: 100%; transition: all 0.2s; margin-top: 4px;
  }
  .btn-save:active { transform: scale(0.97); opacity: 0.9; }

  /* LIST */
  .list-wrap { padding: 12px 16px; display: flex; flex-direction: column; gap: 10px; }
  .game-card {
    background: var(--card); border-radius: 14px; padding: 14px 16px;
    border-left: 4px solid var(--border); animation: fadeIn 0.3s ease;
  }
  .game-card.buy { border-left-color: var(--green); }
  .game-card.retry { border-left-color: var(--orange); }
  .game-card.skip { border-left-color: #555; }
  @keyframes fadeIn { from { opacity:0; transform:translateY(6px); } to { opacity:1; transform:none; } }

  .gc-top { display: flex; justify-content: space-between; align-items: flex-start; gap: 8px; }
  .gc-name { font-weight: 600; font-size: 16px; line-height: 1.2; }
  .gc-stars { font-size: 14px; letter-spacing: 1px; white-space: nowrap; }
  .gc-meta { display: flex; gap: 8px; margin-top: 6px; flex-wrap: wrap; align-items: center; }
  .gc-badge { font-size: 11px; padding: 3px 8px; border-radius: 6px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; }
  .gc-badge.day { background: rgba(232,40,42,0.2); color: #ff8080; }
  .gc-badge.buy { background: rgba(76,175,130,0.2); color: var(--green); }
  .gc-badge.retry { background: rgba(245,131,58,0.2); color: var(--orange); }
  .gc-badge.skip { background: rgba(100,100,100,0.2); color: #888; }
  .gc-price { font-size: 12px; color: var(--gold); font-weight: 600; }
  .gc-note { margin-top: 8px; font-size: 13px; color: #aaa; line-height: 1.4; font-style: italic; }
  .gc-del { font-size: 18px; cursor: pointer; opacity: 0.4; padding: 2px 4px; flex-shrink: 0; transition: opacity 0.2s; }
  .gc-del:active { opacity: 1; }

  /* FILTER BAR */
  .filter-bar { display: flex; gap: 8px; padding: 12px 16px 0; flex-wrap: wrap; }
  .filter-chip { padding: 6px 12px; border-radius: 20px; font-size: 12px; font-weight: 600; border: 1.5px solid var(--border); color: var(--muted); cursor: pointer; transition: all 0.2s; text-transform: uppercase; letter-spacing: 0.5px; }
  .filter-chip.on { border-color: var(--gold); color: var(--gold); background: rgba(245,200,66,0.08); }

  /* STATS */
  .stats-wrap { padding: 16px; display: flex; flex-direction: column; gap: 12px; }
  .stat-row { background: var(--card); border-radius: 14px; padding: 16px; display: flex; justify-content: space-between; align-items: center; }
  .stat-label { font-size: 13px; color: var(--muted); text-transform: uppercase; letter-spacing: 0.5px; font-weight: 600; }
  .stat-val { font-family: 'Bebas Neue', sans-serif; font-size: 32px; letter-spacing: 1px; }
  .stat-val.gold { color: var(--gold); }
  .stat-val.green { color: var(--green); }
  .stat-val.red { color: var(--red); }

  .buy-list { background: var(--card); border-radius: 14px; padding: 16px; }
  .buy-list-title { font-family: 'Bebas Neue', sans-serif; font-size: 18px; letter-spacing: 1.5px; color: var(--gold); margin-bottom: 12px; }
  .buy-item { display: flex; justify-content: space-between; align-items: center; padding: 10px 0; border-bottom: 1px solid var(--border); }
  .buy-item:last-child { border-bottom: none; }
  .buy-item-name { font-size: 14px; font-weight: 500; }
  .buy-item-price { font-size: 13px; color: var(--gold); font-weight: 600; }

  .empty { text-align: center; color: var(--muted); padding: 40px 20px; font-size: 14px; line-height: 1.8; }
  .empty-icon { font-size: 40px; margin-bottom: 8px; }
</style>
  <link rel="manifest" href="/manifest.json">
<script>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('/sw.js');
  }
</script>
</head>
<body>

<div class="header">
  <div>
    <div class="header-title">ðŸŽ² Cannes 2026</div>
    <div class="header-sub">27 fÃ©v â€” 1er mars</div>
  </div>
  <div class="header-count" id="totalCount">0</div>
</div>

<div class="tabs">
  <div class="tab active" onclick="showTab('add')">ï¼‹ Ajouter</div>
  <div class="tab" onclick="showTab('list')">ðŸ“‹ Liste</div>
  <div class="tab" onclick="showTab('stats')">ðŸ“Š Bilan</div>
</div>

<!-- PAGE AJOUTER -->
<div class="page active" id="page-add">
  <div class="form-wrap">

    <div>
      <div class="field-label">Nom du jeu *</div>
      <input type="text" id="gameName" placeholder="Ex: Flip 7, Rebirthâ€¦">
    </div>

    <div>
      <div class="field-label">Ã‰diteur</div>
      <input type="text" id="gameEditor" placeholder="Ex: Repos Productionâ€¦">
    </div>

    <div>
      <div class="field-label">Jour</div>
      <div class="day-btns">
         <button class="day-btn on" onclick="selectDay(this,'Jeu 26')">Jeu 26</button>
        <button class="day-btn on" onclick="selectDay(this,'Ven 27')">Ven 27</button>
        <button class="day-btn" onclick="selectDay(this,'Sam 28')">Sam 28</button>
        <button class="day-btn" onclick="selectDay(this,'Dim 1')">Dim 1</button>
      </div>
    </div>

    <div>
      <div class="field-label">Note</div>
      <div class="stars" id="starRating">
        <span class="star" onclick="setStars(1)">â˜…</span>
        <span class="star" onclick="setStars(2)">â˜…</span>
        <span class="star" onclick="setStars(3)">â˜…</span>
        <span class="star" onclick="setStars(4)">â˜…</span>
        <span class="star" onclick="setStars(5)">â˜…</span>
      </div>
    </div>

    <div>
      <div class="field-label">DÃ©cision</div>
      <div class="pills">
        <div class="pill buy" onclick="selectDecision('buy',this)">ðŸ›’ Acheter</div>
        <div class="pill retry" onclick="selectDecision('retry',this)">ðŸ”„ Ã€ retester</div>
        <div class="pill skip" onclick="selectDecision('skip',this)">âœ— Non merci</div>
      </div>
    </div>

    <div>
      <div class="field-label">Prix repÃ©rÃ©</div>
      <input type="text" id="gamePrice" placeholder="Ex: 35 â‚¬">
    </div>

    <div>
      <div class="field-label">Notes / impressions</div>
      <textarea id="gameNote" placeholder="MÃ©canique intÃ©ressante, thÃ¨me sympa, durÃ©e de partieâ€¦"></textarea>
    </div>

    <button class="btn-save" onclick="saveGame()">ENREGISTRER LE JEU</button>
  </div>
</div>

<!-- PAGE LISTE -->
<div class="page" id="page-list">
  <div class="filter-bar">
    <div class="filter-chip on" onclick="setFilter('all',this)">Tous</div>
    <div class="filter-chip" onclick="setFilter('buy',this)">ðŸ›’ Acheter</div>
    <div class="filter-chip" onclick="setFilter('retry',this)">ðŸ”„ Retester</div>
    <div class="filter-chip" onclick="setFilter('skip',this)">âœ— Non</div>
  </div>
  <div class="list-wrap" id="gameList"></div>
</div>

<!-- PAGE STATS -->
<div class="page" id="page-stats">
  <div class="stats-wrap" id="statsWrap"></div>
</div>

<script>
  let games = JSON.parse(localStorage.getItem('cannes2026') || '[]');
  let currentStars = 0;
  let currentDecision = '';
  let currentDay = 'Ven 27';
  let currentFilter = 'all';

  function showTab(name) {
    document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
    document.getElementById('page-' + name).classList.add('active');
    document.querySelectorAll('.tab')[['add','list','stats'].indexOf(name)].classList.add('active');
    if (name === 'list') renderList();
    if (name === 'stats') renderStats();
  }

  function selectDay(btn, day) {
    document.querySelectorAll('.day-btn').forEach(b => b.classList.remove('on'));
    btn.classList.add('on');
    currentDay = day;
  }

  function setStars(n) {
    currentStars = n;
    document.querySelectorAll('.star').forEach((s, i) => s.classList.toggle('on', i < n));
  }

  function selectDecision(type, el) {
    currentDecision = type;
    document.querySelectorAll('.pill').forEach(p => p.classList.remove('on'));
    el.classList.add('on');
  }

  function saveGame() {
    const name = document.getElementById('gameName').value.trim();
    if (!name) { document.getElementById('gameName').focus(); return; }
    const game = {
      id: Date.now(),
      name,
      editor: document.getElementById('gameEditor').value.trim(),
      day: currentDay,
      stars: currentStars,
      decision: currentDecision,
      price: document.getElementById('gamePrice').value.trim(),
      note: document.getElementById('gameNote').value.trim()
    };
    games.unshift(game);
    save();
    resetForm();
    showFeedback();
  }

  function resetForm() {
    document.getElementById('gameName').value = '';
    document.getElementById('gameEditor').value = '';
    document.getElementById('gamePrice').value = '';
    document.getElementById('gameNote').value = '';
    currentStars = 0; currentDecision = '';
    document.querySelectorAll('.star').forEach(s => s.classList.remove('on'));
    document.querySelectorAll('.pill').forEach(p => p.classList.remove('on'));
    document.querySelectorAll('.day-btn').forEach((b,i) => b.classList.toggle('on', i===0));
    currentDay = 'Ven 27';
  }

  function showFeedback() {
    const btn = document.querySelector('.btn-save');
    btn.textContent = 'âœ“ ENREGISTRÃ‰ !';
    btn.style.background = 'var(--green)';
    setTimeout(() => { btn.textContent = 'ENREGISTRER LE JEU'; btn.style.background = 'var(--gold)'; }, 1500);
  }

  function save() {
    localStorage.setItem('cannes2026', JSON.stringify(games));
    document.getElementById('totalCount').textContent = games.length;
  }

  function deleteGame(id) {
    games = games.filter(g => g.id !== id);
    save(); renderList();
  }

  function setFilter(f, el) {
    currentFilter = f;
    document.querySelectorAll('.filter-chip').forEach(c => c.classList.remove('on'));
    el.classList.add('on');
    renderList();
  }

  function starsDisplay(n) {
    return n ? 'â˜…'.repeat(n) + 'â˜†'.repeat(5-n) : 'â€”';
  }

  const decisionLabel = { buy: 'ðŸ›’ Acheter', retry: 'ðŸ”„ Retester', skip: 'âœ— Non merci', '': 'â€”' };

  function renderList() {
    const filtered = currentFilter === 'all' ? games : games.filter(g => g.decision === currentFilter);
    const el = document.getElementById('gameList');
    if (!filtered.length) {
      el.innerHTML = `<div class="empty"><div class="empty-icon">ðŸŽ²</div>Aucun jeu ici encore.<br>Ajoute ta premiÃ¨re dÃ©couverte !</div>`;
      return;
    }
    el.innerHTML = filtered.map(g => `
      <div class="game-card ${g.decision}">
        <div class="gc-top">
          <div class="gc-name">${g.name}${g.editor ? `<span style="font-weight:400;color:var(--muted);font-size:13px;"> â€” ${g.editor}</span>` : ''}</div>
          <div style="display:flex;align-items:center;gap:8px;">
            <div class="gc-stars" style="color:var(--gold)">${starsDisplay(g.stars)}</div>
            <div class="gc-del" onclick="deleteGame(${g.id})">ðŸ—‘</div>
          </div>
        </div>
        <div class="gc-meta">
          <span class="gc-badge day">${g.day}</span>
          ${g.decision ? `<span class="gc-badge ${g.decision}">${decisionLabel[g.decision]}</span>` : ''}
          ${g.price ? `<span class="gc-price">${g.price}</span>` : ''}
        </div>
        ${g.note ? `<div class="gc-note">${g.note}</div>` : ''}
      </div>
    `).join('');
  }

  function renderStats() {
    const wrap = document.getElementById('statsWrap');
    const total = games.length;
    const toBuy = games.filter(g => g.decision === 'buy');
    const toRetry = games.filter(g => g.decision === 'retry');
    const avg = total ? (games.reduce((s,g) => s + (g.stars||0), 0) / games.filter(g=>g.stars).length || 0).toFixed(1) : 'â€”';
    const perDay = { 'Jeu 26': 0,'Ven 27': 0, 'Sam 28': 0, 'Dim 1': 0 };
    games.forEach(g => { if (perDay[g.day] !== undefined) perDay[g.day]++; });

    wrap.innerHTML = `
      <div class="stat-row"><div class="stat-label">Jeux testÃ©s</div><div class="stat-val gold">${total}</div></div>
      <div class="stat-row"><div class="stat-label">Ã€ acheter</div><div class="stat-val green">${toBuy.length}</div></div>
      <div class="stat-row"><div class="stat-label">Ã€ retester</div><div class="stat-val" style="color:var(--orange)">${toRetry.length}</div></div>
      <div class="stat-row"><div class="stat-label">Note moyenne</div><div class="stat-val gold">${avg}â˜…</div></div>
      <div class="stat-row" style="flex-direction:column;gap:10px;align-items:stretch;">
        <div class="stat-label">Par jour</div>
        ${Object.entries(perDay).map(([d,n]) => `
          <div style="display:flex;justify-content:space-between;align-items:center;">
            <span style="font-size:14px;color:var(--text)">${d}</span>
            <span style="font-family:'Bebas Neue';font-size:22px;color:var(--red)">${n} jeu${n>1?'x':''}</span>
          </div>
        `).join('')}
      </div>
      ${toBuy.length ? `
      <div class="buy-list">
        <div class="buy-list-title">ðŸ›’ Liste d'achats</div>
        ${toBuy.map(g => `
          <div class="buy-item">
            <div class="buy-item-name">${g.name}</div>
            <div class="buy-item-price">${g.price || '?'}</div>
          </div>
        `).join('')}
      </div>` : ''}
    `;
  }

  // Init
  document.getElementById('totalCount').textContent = games.length;
</script>
</body>
</html>
